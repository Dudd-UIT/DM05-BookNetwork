import { Component, EventEmitter, Input, Output } from '@angular/core';
import { BookResponse } from '../../../../services/models/book-response';
import { RatingComponent } from '../rating/rating.component';
import { NgIf } from '@angular/common';

@Component({
  selector: 'app-book-card',
  imports: [NgIf, RatingComponent],
  templateUrl: './book-card.component.html',
  styleUrl: './book-card.component.scss',
})
export class BookCardComponent {
  private _book: BookResponse = {};
  private _manage = false;
  private _bookCover: string | undefined;

  get bookCover(): string | undefined {
    if (this._book.cover) {
      return 'data:image/jpg;base64,' + this._book.cover;
    }
    return 'data:image/jpeg;base64,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6DDBmZ/Vu8iNuXZccX0rl7nupnNpl/VsLdKld0lpdue1DndXB20ymZFRNs8W3aFpySAHciTmiOv1XfArUrJeY3b1cJq0WU6kugszBpgivWeHF0k5uzeBOpOo21NbSAREUgiIgIiICIiDJzy+JJMCBPTosURAREQEREBERAREQFusqjaV6x1RuZgc0ubvLQQSIPULSiCcbdWJpjNQrF2VskOA78OzQAYyk5OQ+1toFtF5YGtl7GqKZL9TBcAewgzMiC2r5O5yVXkUYE1Qu7MUW56NTMA8GIiHExudSM2jt+6PcFS4s6tF36uoHkOLToGg5XZRlB65R9/UGFRMAiIpBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQERZ0WipWaHHKCQC7oCdT5IJ2nwVf1KTHC2fD4y95mstLhz00BOqjMWwmtg112VxTLHkB0Eg6EkA6E9CvYbTjmx/RNuHV2h47IublfLNO9JiNNRp1VJ46xS0xrjSlU7XNb9mxtR7Q7SC+YEAyJCjIo6KzUqeG9scz3ZfSKo0FTN6P2ZyHaM2cDx110WD24f6MILs+a4n/EjLlrdjHjPZT5T9pMiuIp+qyxNPuvIPojTJFQj0uZc3SNxoD9UTzjWAUgiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIg//9k=';
  }

  get book(): BookResponse {
    return this._book;
  }

  @Input()
  set book(value: BookResponse) {
    this._book = value;
  }

  get manage(): boolean {
    return this._manage;
  }

  @Input()
  set manage(value: boolean) {
    this._manage = value;
  }

  @Output() private share: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();
  @Output() private archive: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();
  @Output() private addToWaitingList: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();
  @Output() private borrow: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();
  @Output() private edit: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();
  @Output() private details: EventEmitter<BookResponse> =
    new EventEmitter<BookResponse>();

  onShare() {
    this.share.emit(this._book);
  }

  onArchive() {
    this.archive.emit(this._book);
  }

  onAddToWaitingList() {
    this.addToWaitingList.emit(this._book);
  }

  onBorrow() {
    this.borrow.emit(this._book);
  }

  onEdit() {
    this.edit.emit(this._book);
  }

  onShowDetails() {
    this.details.emit(this._book);
  }
}
